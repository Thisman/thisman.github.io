# AGENTS.md - Оценка по трем точкам

## Описание приложения

Приложение "Оценка по трём точкам" реализует метод PERT (Program Evaluation and Review Technique) для оценки задач с учетом неопределенности. Метод использует три оценки:
- **Оптимистичная (O)** - время при идеальном ходе работ
- **Реалистичная (R)** - обычное время с учетом рисков
- **Пессимистичная (P)** - время в худшем случае

## Основные механики

### 1. Формула расчета
Итоговая оценка вычисляется по формуле PERT:
```
estimate = (O + 4R + P) / 6
```
Где:
- O - оптимистичная оценка
- R - реалистичная оценка (вес 4)
- P - пессимистичная оценка

### 2. Валидация входных данных
Приложение проверяет корректность оценок:
- Все поля должны быть заполнены числами
- O ≤ R ≤ P (оптимистичная ≤ реалистичная ≤ пессимистичная)
- При ошибке показывается соответствующее сообщение

### 3. Визуализация распределения
- Используется Chart.js для отображения графика
- Строится треугольное распределение вероятностей
- Отмечаются ключевые точки: O, R, P и итоговая оценка
- Цветовая индикация для итоговой оценки

### 4. Треугольное распределение
Функция `triangularPdf(x, a, c, b)` вычисляет плотность вероятности:
```javascript
function triangularPdf(x, a, c, b) {
    if (x < a || x > b) return 0;
    if (x === c) return 2 / (b - a);
    if (x < c) return (2 * (x - a)) / ((b - a) * (c - a));
    return (2 * (b - x)) / ((b - a) * (b - c));
}
```

## Структура файлов

```
triangular-estimation/
├── index.html      # Основная разметка с формой и графиком
├── index.css       # Стили с двухколоночным макетом
├── index.js        # Логика расчета и визуализации
└── AGENTS.md       # Этот файл
```

## Ключевые функции

### `drawGraph(o, r, p, estimate)`
Создает визуализацию распределения:
- Генерирует точки для построения графика
- Настраивает Chart.js с двумя датасетами
- Отображает PDF и ключевые точки
- Использует цветовую схему для выделения

### `triangularPdf(x, a, c, b)`
Вычисляет плотность вероятности треугольного распределения:
- a - минимальное значение (оптимистичная)
- c - модальное значение (реалистичная)
- b - максимальное значение (пессимистичная)

### Обработчик кнопки "Посчитать"
Выполняет полный цикл расчета:
1. Парсит входные значения
2. Валидирует данные
3. Вычисляет итоговую оценку
4. Обновляет график и результат

## Правила работы

### 1. HTML структура
- Двухколоночный макет (форма + график)
- Семантическая разметка с описанием метода
- Canvas элемент для Chart.js
- Навигационные ссылки

### 2. CSS стили
- Использование общих стилей из `/how-many-sp/index.css`
- Дополнительные стили для двухколоночного макета
- Flexbox для выравнивания элементов
- Адаптивная ширина контейнера (700px)

### 3. JavaScript логика
- Внешняя зависимость Chart.js
- Обработка ошибок валидации
- Модульная структура функций
- Константы для цветов и настроек

### 4. Визуализация
- Линейный график для PDF
- Точечный график для ключевых значений
- Цветовая дифференциация точек
- Подписи осей и заголовков

## Зависимости

- **Chart.js** (CDN): визуализация графиков
- **Google Fonts**: Roboto, Roboto Condensed
- **Общие стили**: `/how-many-sp/index.css`
- **Общие ресурсы**: изображения из `/images/`

## Алгоритм работы

1. **Ввод данных**: пользователь вводит три оценки
2. **Валидация**: проверка корректности и логичности значений
3. **Расчет**: применение формулы PERT
4. **Визуализация**: построение графика распределения
5. **Отображение результата**: показ итоговой оценки

## Обработка ошибок

- **Пустые поля**: "Введите все оценки"
- **Некорректная оптимистичная**: "Оптимистичная оценка не должна быть больше других"
- **Некорректная реалистичная**: "Реалистичная оценка должна быть не меньше оптимистичной и не больше пессимистичной"
- **Некорректная пессимистичная**: "Пессимистичная оценка должна быть не меньше остальных"

## Рекомендации по развитию

1. Добавить сохранение истории расчетов
2. Реализовать экспорт графиков
3. Добавить различные типы распределений
4. Создать мобильную версию интерфейса
5. Добавить анимации при построении графика
6. Реализовать сравнение нескольких оценок 